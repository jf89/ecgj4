#pragma once

#define SPRITES \
	/* start sprite list */ \
	SPRITE(GRASS_BR_EMPTY_1,   0.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BR_EMPTY_2,  48.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_B_EMPTY_1,   16.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_B_EMPTY_2,   64.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_B_EMPTY_3,   16.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_B_EMPTY_4,   64.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BL_EMPTY_1,  32.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BL_EMPTY_2,  80.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_R_EMPTY_1,    0.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_R_EMPTY_2,   48.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_R_EMPTY_3,   32.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_R_EMPTY_4,   80.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_L_EMPTY_1,   32.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_L_EMPTY_2,   80.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_L_EMPTY_3,    0.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_L_EMPTY_4,   48.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TR_EMPTY_1,   0.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TR_EMPTY_2,  48.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_T_EMPTY_1,   16.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_T_EMPTY_2,   64.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_T_EMPTY_3,   16.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_T_EMPTY_4,   64.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TL_EMPTY_1,  32.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TL_EMPTY_2,  80.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BR_FULL_1,    0.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BR_FULL_2,   48.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BL_FULL_1,   32.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_BL_FULL_2,   80.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TR_FULL_1,    0.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TR_FULL_2,   48.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TL_FULL_1,   32.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_TL_FULL_2,   80.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_1,      96.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_2,     112.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_3,      96.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_4,     112.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_5,      16.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(GRASS_FULL_6,      64.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(SAND_BR_EMPTY,    128.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_B_EMPTY_1,   144.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_B_EMPTY_2,   144.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(SAND_BL_EMPTY,    160.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_R_EMPTY_1,   128.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(SAND_R_EMPTY_2,   160.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(SAND_L_EMPTY_1,   160.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(SAND_L_EMPTY_2,   128.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(SAND_TR_EMPTY,    128.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(SAND_T_EMPTY_1,   144.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(SAND_T_EMPTY_2,   144.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(SAND_TL_EMPTY,    160.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(SAND_BR_FULL,     128.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(SAND_BL_FULL,     160.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(SAND_TR_FULL,     128.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(SAND_TL_FULL,     160.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_1,      176.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_2,      176.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_3,      144.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_RARE_1, 192.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_RARE_2, 192.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_RARE_3, 208.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(SAND_FULL_RARE_4, 208.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(WATER_1,          304.0f, 304.0f, 16.0f, 16.0f) \
	SPRITE(WATER_2,          304.0f, 288.0f, 16.0f, 16.0f) \
	SPRITE(WATER_3,          304.0f, 272.0f, 16.0f, 16.0f) \
	SPRITE(WATER_4,          304.0f, 256.0f, 16.0f, 16.0f) \
	SPRITE(WATER_5,          304.0f, 240.0f, 16.0f, 16.0f) \
	SPRITE(WATER_6,          304.0f, 224.0f, 16.0f, 16.0f) \
	SPRITE(GOBLIN,             0.0f,  48.0f, 16.0f, 16.0f) \
	SPRITE(SKELETON,          16.0f,  48.0f, 16.0f, 16.0f) \
	SPRITE(CYCLOPS,           32.0f,  48.0f, 32.0f, 16.0f) \
	SPRITE(SNAKE,             64.0f,  48.0f, 32.0f, 16.0f) \
	SPRITE(SLIME,             96.0f,  48.0f, 16.0f, 16.0f) \
	SPRITE(BAT,              112.0f,  48.0f, 16.0f, 16.0f) \
	SPRITE(MAN,                0.0f,  64.0f, 16.0f, 16.0f) \
	SPRITE(WOMAN,             16.0f,  64.0f, 16.0f, 16.0f) \
	SPRITE(KNIGHT,            32.0f,  64.0f, 16.0f, 16.0f) \
	SPRITE(WITCH,            112.0f,  64.0f, 16.0f, 32.0f) \
	SPRITE(PRIEST,           144.0f,  64.0f, 16.0f, 16.0f) \
	SPRITE(NECROMANCER,      160.0f,  64.0f, 16.0f, 16.0f) \
	SPRITE(FORT,              48.0f, 144.0f, 32.0f, 32.0f) \
	SPRITE(TOWER,             80.0f, 144.0f, 16.0f, 32.0f) \
	SPRITE(SMALL_HOUSE,       96.0f, 144.0f, 16.0f, 16.0f) \
	SPRITE(BIG_HOUSE,         96.0f, 160.0f, 16.0f, 16.0f) \
	SPRITE(WELL,             112.0f, 144.0f, 16.0f, 16.0f) \
	SPRITE(SMALL_FOUNTAIN,    80.0f, 176.0f, 16.0f, 16.0f) \
	SPRITE(BIG_FOUNTAIN,      96.0f, 176.0f, 16.0f, 16.0f) \
	SPRITE(TEMPLE,           112.0f, 176.0f, 16.0f, 16.0f) \
	SPRITE(WINDMILL,          80.0f, 192.0f, 16.0f, 32.0f) \
	SPRITE(STATUE,            96.0f, 192.0f, 16.0f, 32.0f) \
	SPRITE(ARENA,            272.0f,  96.0f, 32.0f, 32.0f) \
	SPRITE(DARK_FORT,         48.0f, 176.0f, 48.0f, 48.0f) \
	/* end sprite list */

enum sprite {
#define SPRITE(name, _left, _bottom, _width, _height) SPRITE_ ## name,
SPRITES
#undef SPRITE

	NUM_SPRITES,
};

struct sprite_rect {
	v2 bottom_left;
	v2 extent;
};

struct sprite_rect sprite_rects[] = {
#define SPRITE(_name, left, bottom, width, height) \
	{ .bottom_left = { .x = left, .y = bottom }, .extent = { .w = width, .h = height } },
SPRITES
#undef SPRITE
};

struct ground_anim {
	enum {
		GROUND_ANIM_NONE,
		GROUND_ANIM_WATER,
	} type;
	enum sprite sprite;
	v2 pos;
	f32 next_change_time;
};

#define MAX_GROUND_ANIMS (256*256)

struct entity_anim {
	enum {
		ENTITY_ANIM_NONE,
		ENTITY_ANIM_BOBBING,
	} type;
	enum sprite sprite;
	v2 pos;
	union {
		struct {
			f32 time;
		} bobbing;
	};
};

#define MAX_ENTITY_ANIMS (256*256)

struct anim_state {
	u32 num_ground_anims;
	struct ground_anim ground_anims[MAX_GROUND_ANIMS];
	u32 num_entity_anims;
	struct entity_anim entity_anims[MAX_ENTITY_ANIMS];
};

#define DRAW_ANIM_STATE \
	void draw_anim_state(struct anim_state *anim_state, struct draw_data *draw_data, f32 time)
DRAW_ANIM_STATE;
